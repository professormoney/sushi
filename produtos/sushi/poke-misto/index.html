<html lang="pt-br" translate="no"><head></head><body>

<meta http-equiv="content-type" content="text/html;charset=UTF-8">
<meta http-equiv="content-type" content="text/html;charset=UTF-8">

<meta name="google" content="notranslate">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="shortcut icon" type="image/jpg" href="images/logo.webp">
<title>Noaki 0,99 Sushi Delivery - Faça seu pedido!</title>
<meta name="description" content="Faça seu pedido online no Noaki 0,99 Sushi Delivery. Acesse e peça agora pelo delivery Contatei!">
<link type="text/css" href="css/delivry.css" rel="stylesheet">
<style type="text/css">
  h1, h2 { color:#000000; }
  header#topo .cover { background-color:#000000; }
  header#topo .info h1 { color:#000000; }
  header#topo .info .icones a { color:#000000; border-color:#000000; }
  header#topo .cover .logo { background:#000000; }
  header#topo #menuCategorias { background:#000000; }
  header#topo .categorias a { border-top-color:#000000; }
  footer { background:#000000; }
  footer#carrinho .container .icone span { color:#000000; }
  .btn, a.voltar, .btnSair, .btnFidelidade, .btnGoogle, .btnEmail, .btnSemCadastro { background:#000000; }
  .qtdeProduto i:hover { color:#000000; }
  .lista .item .col .nomeProduto { color:#000000; }
  main#lista .produtos .item a:hover { border:2px solid #000000; }
  #pedido .entrega .radio label input[type=radio]:checked, #pedido .entrega .radio label:hover { background:#000000; }
  #pedido .pagamentos input[type=radio]:checked+label::before,
  #detalhesProduto .info2 .opcoes input[type=checkbox]:checked+label::before,
  #pedido .trocarPontos input[type=checkbox]:checked+label::before { background-color:#000000; border:2px solid #000000; }
  .selecionado { border:2px solid #000000; }
  #meuCarrinho button.fechar, #rastreamento .registro span.passou { background:#000000; }
  span.estoque i { color:#000000; }

  /* Modais simples (checkout + pix) */
  .modalShade{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:9999;}
  .modalBox{width:min(92vw,560px);background:#fff;border-radius:12px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,.25);}
  .modalHead{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;}
  .modalHead h3{margin:0;font-size:18px;}
  .modalClose{border:0;background:#eee;border-radius:6px;padding:6px 10px;cursor:pointer;}
  .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px;}
  .inp{width:100%;padding:10px;border:1px solid #ddd;border-radius:8px;}
  .btnPrimary{width:100%;border:0;background:#00B050;color:#fff;padding:12px;border-radius:10px;font-weight:700;cursor:pointer;}
</style>
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capacity" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar" content="#000000">
<meta name="apple-mobile-web-app-status-bar-style" content="#000000">
<meta name="apple-mobile-web-app-title" content="Açaí Delli">
<script src="sweetalert2%254011.html"></script>
<link rel="stylesheet" href="icone91f.html">

<div id="opacidade" class="fechar"></div>
<div>
  <div class="container containerFinalizar">
    <a class="voltar" href="../../../index.html" title="Voltar"><i class="fa-solid fa-chevron-left"></i> VOLTAR</a>

    <div id="detalhesProduto">
      <div class="info1">
        <div class="somarAoPreco" style="display:none">s</div>
        <div class="fotoProduto">
          <figure>
							<img src="images/poke2.webp" width="300px" height="300px" alt="Açaí 300ml">
						</figure>
					</div>
					<div class="descricao">
						<h3>Poke Misto</h3>
						<span class="detalhe">Arroz shari, salmão em cubos, tilápia, couve cryspe, sunomono, manga e a finalização é do seu jeito.</span>
						por
						<span class="preco">
							R$ 59,90<span style="display:none;">59.90</span>
						</span>
					</div>
      </div>

      <div class="info2">
        <!-- ====== COMPLEMENTOS (mantido exatamente como você enviou) ====== -->
        <div id="complementos-gratis" class="tipo" data-id="15313" data-calculo="n" data-minimo="0" data-maximo="2" data-opcional="n">
						<div class="topo">
							<div>
								<h3>Finalize do seu jeito :)</h3>
								<span class="detalhe">
									Escolha até 2 opções </span>
							</div>
							<div class="col2">
								<span class="escolhidos"><span>0</span>/2</span>
								<i class="fa-solid fa-circle-check" style="display: inline"></i>
							</div>
						</div>
						<div class="opcoes" data-id="118806">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Gengibre</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118812">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Amendoa Laminada</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118807">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Amendoim</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118813">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Cebola Roxa</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118815">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Raspa de Limão Siciliano</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118814">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Gergelim</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118814">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Xerém de Amendoim</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118814">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Cebolinha</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						</div>
					<div id="complementos-gratis" class="tipo" data-id="15313" data-calculo="n" data-minimo="0" data-maximo="1" data-opcional="n">
						<div class="topo">
							<div>
								<h3>Escolha 1 molho :)</h3>
								<span class="detalhe">
									Escolha 1 opção </span>
							</div>
							<div class="col2">
								<span class="escolhidos"><span>0</span>/1</span>
								<i class="fa-solid fa-circle-check" style="display: inline"></i>
							</div>
						</div>
						<div class="opcoes" data-id="118806">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Molho ponzo especial do chefe</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118812">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Shoyu Tradicional</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118807">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Shoyu Light</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118813">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Tarê</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
						<div class="opcoes" data-id="118815">
							<div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
								<span class="nome" style="">
									<b>Agridoce</b>
									<span class="detalheOpcao" style="padding-right:10px"></span>
									<span class="preco"><span style="display:none;">0.00</span></span>
								</span>
								<div class="qtdeProdutoOpcao">
									<button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
									<input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
									<button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
								</div>
							</div>
						</div>
					</div>

        <div id="complementos-gratis" class="tipo" data-id="15313" data-calculo="n" data-minimo="0" data-maximo="1" data-opcional="n">
          <div class="topo">
            <div>
              <h3>Brinde no 1º pedido:</h3>
              <span class="detalhe">Escolha até 1 opção </span>
            </div>
            <div class="col2">
              <span class="escolhidos"><span>0</span>/1</span>
              <i class="fa-solid fa-circle-check" style="display: inline"></i>
            </div>
          </div>
          <div class="opcoes" data-id="118806">
            <div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
              <span class="nome" style="">
                <b>Bis (3 un)</b>
                <span class="detalheOpcao" style="padding-right:10px"></span>
                <span class="preco">Grátis no 1º pedido<span style="display:none;">0.00</span></span>
              </span>
              <div class="qtdeProdutoOpcao">
                <button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
                <input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
                <button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
              </div>
            </div>
          </div>
          <div class="opcoes" data-id="118812">
            <div class="desc" style="width: 100%; flex-direction: row; align-items: center;">
              <span class="nome" style="">
                <b>Bombom Sonho de Valsa (1 un)</b>
                <span class="detalheOpcao" style="padding-right:10px"></span>
                <span class="preco">Grátis no 1º pedido<span style="display:none;">0.00</span></span>
              </span>
              <div class="qtdeProdutoOpcao">
                <button class="removerQtdeOpcao" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
                <input class="qtdeOpcao" type="text" value="0" min="0" size="3" disabled="">
                <button class="adicionarQtdeOpcao" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
              </div>
            </div>
          </div>
        </div>
        <!-- ====== /COMPLEMENTOS ====== -->

        <div class="overlay"></div>
        <div class="imagem-ampliada">
          <img src="#" alt="">
          <button class="fechar"><i class="fa-solid fa-xmark"></i></button>
        </div>
        <label>Adicionar algum detalhe?</label>
        <input class="observacao" type="text" name="observacao" placeholder="Escreva o detalhe aqui ..." maxlength="140">
        <em><span>0</span>/140</em>
      </div>

      <div class="info3">
        <input id="idProduto" type="hidden" name="idProduto" value="12111">
        <div class="qtdeProduto" style="display: none;">
          <button class="removerQtde" aria-label="Remover"><i class="fa-solid fa-minus"></i></button>
          <input class="qtde" type="text" value="1" min="1" max="86" size="3" disabled="">
          <button class="adicionarQtde" aria-label="Adicionar"><i class="fa-solid fa-plus"></i></button>
        </div>
        <div id="precoProduto">R$ 0,00</div>
        <span class="precoProduto" style="display:none">14.00</span>
        <button class="btn adicionarProduto" onclick="finalizar()">FINALIZAR PEDIDO</button>
        <!-- REMOVIDO o <a href="https://pay.deliverysushipagamentos.online/..."> -->
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/deliveryProduto.js"></script>
<script src="js/all.js" data-auto-replace-svg="nest" defer type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-mask.js" defer></script>

<!-- ===== Modal: Finalizar Pedido (formulário) ===== -->
<div id="checkoutModal" class="modalShade" aria-hidden="true">
  <div class="modalBox">
    <div class="modalHead">
      <h3>Finalizar pedido</h3>
      <button id="chkClose" class="modalClose">X</button>
    </div>

    <div class="grid2">
      <div style="grid-column:1/-1;">
        <label>Nome e sobrenome</label>
        <input id="f-nome" class="inp" type="text" placeholder="Ex.: Maria Souza">
      </div>
      <div>
        <label>CPF</label>
        <input id="f-cpf" class="inp" type="text" placeholder="Somente números">
      </div>
      <div>
        <label>Telefone</label>
        <input id="f-fone" class="inp" type="text" placeholder="DDD + número">
      </div>

      
      <div style="grid-column:1/-1;">
        <label>Endereço</label>
        <input id="f-endereco" class="inp" type="text" placeholder="Av. Brasil">
      </div>
      <div>
        <label>Rua</label>
        <input id="f-rua" class="inp" type="text" placeholder="Rua das Flores">
      </div>
      <div>
        <label>Bairro</label>
        <input id="f-bairro" class="inp" type="text" placeholder="Centro">
      </div>
      <div>
        <label>Cidade</label>
        <input id="f-cidade" class="inp" type="text" placeholder="São Paulo">
      </div>
      <div>
        <label>Número</label>
        <input id="f-numero" class="inp" type="text" placeholder="123">
      </div>

      <div style="grid-column:1/-1;">
        <label>Observações</label>
        <textarea id="f-obs" class="inp" rows="2" placeholder="Algum detalhe?"></textarea>
      </div>
    </div>

    <div style="margin-top:12px;padding-top:10px;border-top:1px dashed #e5e5e5;">
      <div style="display:flex;justify-content:space-between;margin:4px 0;color:#666;">
        <span>Taxa de entrega</span><span id="v-entrega">Grátis</span>
      </div>
      <div style="display:flex;justify-content:space-between;margin:4px 0;color:#666;">
        <span>Forma de pagamento</span><span>Pix</span>
      </div>
      <div style="display:flex;justify-content:space-between;margin-top:8px;font-size:18px;">
        <strong>Total</strong><strong id="v-total">R$ 0,00</strong>
      </div>
    </div>

    <button id="btnPagarPix" class="btnPrimary">Efetuar pagamento via Pix</button>
  </div>
</div>

<!-- ===== Modal: Pix (QR + copia-e-cola) ===== -->
<div id="pixModal" class="modalShade" aria-hidden="true">
  <div class="modalBox">
    <div class="modalHead">
      <h3>Pagamento via Pix</h3>
      <button id="btnClosePix" class="modalClose">X</button>
    </div>
    <div id="pixQr" style="display:flex;justify-content:center;margin:10px 0 14px;"></div>
    <div id="pixCode" style="word-break:break-word;max-height:160px;overflow:auto;font-size:14px;"></div>
    <button id="btnCopyPix" class="btnPrimary" style="background:#0d6efd;">Copiar código Pix</button>
  </div>
</div>

<!-- QRCode lib -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" defer></script>

<script>
  const DELIVERY_FEE = 0; // 0 = Grátis

  function openModal(id){ const m=document.getElementById(id); m.style.display='flex'; m.setAttribute('aria-hidden','false'); }
  function closeModal(id){ const m=document.getElementById(id); m.style.display='none'; m.setAttribute('aria-hidden','true'); }

  function getProductInfo() {
    const name = document.querySelector('#detalhesProduto .descricao h3')?.textContent?.trim() || 'Produto';
    let amount = parseFloat(
      document.querySelector('#detalhesProduto .descricao .preco span[style*="display:none"]')?.textContent?.trim() || ''
    );
    if (!isFinite(amount)) {
      const vis = document.querySelector('#detalhesProduto .descricao .preco')?.textContent || '';
      const n = vis.replace(/[^\d,.-]/g,'').replace(/\./g,'').replace(',', '.');
      amount = parseFloat(n);
    }
    return { name, amount: isFinite(amount) ? amount : 0 };
  }

  async function emitirPix(amount, description, customer){
    const resp = await fetch('/.netlify/functions/pix-emit', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ amount, description, customer })
    });
    const json = await resp.json().catch(()=>null);
    if (!resp.ok || !json || json.success === false) {
      throw new Error(json?.message || `Falha ao emitir Pix (HTTP ${resp.status})`);
    }
    return json.data.qrcode;
  }

  function showPix(payload){
    const qrWrap = document.getElementById('pixQr');
    qrWrap.innerHTML = '';
    new QRCode(qrWrap, { text: payload, width: 240, height: 240 });
    document.getElementById('pixCode').textContent = payload;

    document.getElementById('btnCopyPix').onclick = async () => {
      try { await navigator.clipboard.writeText(payload); alert('Código Pix copiado!'); }
      catch { alert('Não foi possível copiar automaticamente.'); }
    };
    document.getElementById('btnClosePix').onclick = () => closeModal('pixModal');

    openModal('pixModal');
  }

  // Botão FINALIZAR PEDIDO -> abre o formulário (não gera Pix ainda)
  window.finalizar = function(){
    const { amount } = getProductInfo();
    const total = +(amount + DELIVERY_FEE).toFixed(2);
    document.getElementById('v-entrega').textContent = DELIVERY_FEE === 0 ? 'Grátis' : DELIVERY_FEE.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    document.getElementById('v-total').textContent = total.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    openModal('checkoutModal');
  };

  // Fechar modal de checkout
  document.getElementById('chkClose').addEventListener('click', () => closeModal('checkoutModal'));

  // Efetuar pagamento via Pix (gera o QR)
  document.getElementById('btnPagarPix').addEventListener('click', async () => {
    const { name, amount } = getProductInfo();
    const total = +(amount + DELIVERY_FEE).toFixed(2);

    const nome = document.getElementById('f-nome').value.trim();
    const cpf  = document.getElementById('f-cpf').value.replace(/\D/g,'');
    const fone = document.getElementById('f-fone').value.trim();
    if (!nome || cpf.length < 11 || !fone) { alert('Preencha Nome, CPF (11 dígitos) e Telefone.'); return; }

    const customer = {
      name: nome, document: cpf, phone: fone,
      address: {
        endereco: document.getElementById('f-endereco').value.trim(),
        rua:      document.getElementById('f-rua').value.trim(),
        bairro:   document.getElementById('f-bairro').value.trim(),
        cidade:   document.getElementById('f-cidade').value.trim(),
        numero:   document.getElementById('f-numero').value.trim(),
        obs:      document.getElementById('f-obs').value.trim()
      }
    };

    try{
      const payload = await emitirPix(total, `Pedido: ${name}`, customer);
      closeModal('checkoutModal');
      showPix(payload);
    }catch(e){
      console.error(e);
      alert(e.message || 'Não foi possível gerar o Pix agora.');
    }
  });
</script>

</body></html>
